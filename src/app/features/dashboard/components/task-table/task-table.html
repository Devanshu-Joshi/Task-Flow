<div class="border border-gray-200 rounded-xl shadow-sm overflow-hidden bg-white">
    <div class="overflow-x-auto">
        <table class="w-full min-w-180 text-sm text-left border-collapse table-fixed">
            <thead class="bg-gray-50 text-gray-600 uppercase text-xs sticky top-0">
                <tr>
                    <th class="px-2 sm:px-4 py-2 sm:py-3 cursor-pointer w-16 select-none"
                        (click)="onSortBy('createdAt')">
                        S.No
                        <i class="bx"
                            [ngClass]="{'bx-caret-up': sortField === 'createdAt' && sortDirection === 'asc','bx-caret-down': sortField === 'createdAt' && sortDirection === 'desc'}"></i>
                    </th>

                    <th class="px-2 sm:px-4 py-2 sm:py-3 text-center w-1/3 cursor-pointer select-none"
                        (click)="onSortBy('title')">
                        <span class="inline-flex items-center gap-1">
                            Task
                            <span class="flex flex-col text-xs leading-none">
                                <i class="bx bx-caret-up"
                                    [ngClass]="{'text-gray-400': sortField !== 'title' || sortDirection === 'desc','text-gray-800': sortField === 'title' && sortDirection === 'asc'}"></i>
                                <i class="bx bx-caret-down -mt-1"
                                    [ngClass]="{'text-gray-400': sortField !== 'title' || sortDirection === 'asc','text-gray-800': sortField === 'title' && sortDirection === 'desc'}"></i>
                            </span>
                        </span>
                    </th>
                    <th class="px-2 sm:px-4 py-2 sm:py-3 font-semibold w-32 text-center">Status</th>
                    <th class="px-2 sm:px-4 py-2 sm:py-3 font-semibold w-32 text-center">Due Date</th>
                    <th class="px-2 sm:px-4 py-2 sm:py-3 font-semibold w-40 text-center">Action</th>
                </tr>
            </thead>

            <tbody class="divide-y divide-gray-200">
                @for (
                item of tasks | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage };
                let index = $index;
                track item.id
                ) {
                <!-- Task Table Row Component -->
                <tr app-task-table-row [task]="item" [displayIndex]="(currentPage - 1) * itemsPerPage + index + 1"
                    (edit)="onEdit($event)" (delete)="onDelete($event)"></tr>
                }
                @empty {
                <!-- EmptyState Component -->
                <tr>
                    <td colspan="5">
                        <app-empty-state></app-empty-state>
                    </td>
                </tr>
                }

                <!-- Footer row -->
                <!-- TaskTableFooter Component -->
                <tr app-task-table-footer [total]="tasks.length" [itemsPerPage]="itemsPerPage" [colspan]="5"
                    (clearFilters)="onClearFilters()" (pageChange)="onPageChange($event)">
                </tr>

            </tbody>
        </table>
    </div>
</div>