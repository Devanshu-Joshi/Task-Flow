<div class="page-wrapper" [class.loading]="isLoading()">
    <!-- your entire dashboard UI -->
    <div class="min-h-full w-full bg-linear-to-r from-purple-600 via-fuchsia-600 to-indigo-600 flex items-center flex-col px-4 sm:px-6 lg:px-7
         py-4 sm:py-6 lg:py-7
         gap-6 sm:gap-8">

        <!-- Stats Card Component -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

            <app-stats-card title="Total Tasks" [value]="totalTasks()" subtitle="Tasks created so far" icon="bx-list-ul"
                theme="purple" />

            <app-stats-card title="Completed Tasks" [value]="completedTasks()" subtitle="Great job!"
                icon="bx-check-circle" theme="green" />

            <app-stats-card title="In Progress Tasks" [value]="inProgressTasks()" subtitle="Keep going!"
                icon="bx-loader-dots" theme="yellow" />

            <app-stats-card title="Incomplete Tasks" [value]="incompleteTasks()" subtitle="Needs attention"
                icon="bx-x-circle" theme="red" />

        </div>


        <div class="w-full bg-white rounded-lg px-10 pb-10 pt-7">

            <!-- Task Filters Component -->

            <app-task-filters [statusOptions]="statusOptions" [pageSizeOptions]="pageSizeOptions"
                [searchControl]="searchControl" [(dateRange)]="dateRange" [(selectedStatus)]="selectedStatus"
                [(selectedPageSize)]="selectedPageSize" (pageSizeChangeTrigger)="setItemsPerPage($event)"
                (addTask)="toggleDialog()">
            </app-task-filters>

            <!-- Task Table Component -->

            <app-task-table [tasks]="filteredTasks()" [itemsPerPage]="itemsPerPage" [currentPage]="p"
                [sortField]="sortField()" [sortDirection]="sortDirection()" (editTask)="edit($event)"
                (deleteTask)="delete($event)" (pageChange)="p = $event" (clearFilters)="clearFilters()"
                (sortByChange)="sortBy($event)">
            </app-task-table>

        </div>

        <!-- TaskDialog Component -->
        <app-task-dialog [open]="isDialogClosed == false" (close)="toggleDialog()">

            <!-- TaskForm Component -->
            <app-task-dialog [open]="isDialogClosed == false" (close)="toggleDialog()">
                <app-task-form [form]="taskForm" [dialogTitle]="dialogTitle()" [dialogDescription]="dialogDescription()"
                    [dialogTitleColor]="dialogTitleColor()" [dialogSubmitText]="dialogSubmitText()"
                    [isDeleting]="isDeleting()" (submitForm)="submit()" (cancel)="cancelDialog()"></app-task-form>
            </app-task-dialog>
        </app-task-dialog>
    </div>
</div>

<!-- LoadingOverlay Component -->
<app-loading-overlay [show]="isLoading()" text="Loading tasksâ€¦"></app-loading-overlay>